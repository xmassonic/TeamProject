!function(){var a=window.UserServerApi||(window.UserServerApi={});a.cookies=a.cookies||{},a.cookies.setCookie=function(a,b,c,d,e,f){window[a]=b;var g=a+"="+b;g+=c?";expires="+new Date((new Date).getTime()+c).toGMTString():"",g+=";path="+(e||"/"),g+=d?";domain="+d:"",g+=f?";secure":"",document.cookie=g},a.cookies.getCookie=function(a){if(window[a])return window[a];for(var b=document.cookie.split(/;\s*/),c=0;c<b.length;c++)if(0===b[c].indexOf(a+"="))return b[c].substr(a.length+1);return null},a.cookies.deleteCookie=function(a){var b=window.location.host;b=b.substring(b.indexOf(".")+1),this.setCookie(a,"",-864e5,b,"/")}}(),function(){function a(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}function b(a){return-1===a.indexOf("//www.")?a:a.replace(/\/\/www\./g,"//"+window.location.host.substr(0,window.location.host.indexOf("."))+".")}function c(a,b,c,d){var e="_"+(f.comm.jsonpCallbacks.counter++).toString(36),g=function(){clearTimeout(k),delete f.comm.jsonpCallbacks[e],document.getElementsByTagName("head")[0].removeChild(j)},h=function(a,b){g(),b.success?d(b):c(b)},i=function(){g(),c.apply(this,arguments)};b+="&accept=jsonp",b+="&callback=UserServerApi.comm.jsonpCallbacks."+e,b+="&callerId="+e,b+="get"===a.toLowerCase()?"":"&_method="+a.toLowerCase();var j=document.createElement("script");j.type="text/javascript",j.src=b,j.onerror=i,document.getElementsByTagName("head")[0].appendChild(j);var k=setTimeout(i,6e4);f.comm.jsonpCallbacks[e]=h}function d(a,b){var c;return b?a=jQuery.parseJSON(a):(c=JSON.parse?JSON.parse:eval,a=c(a)),a}function e(a,c,e,f){var g=window.XDomainRequest?!0:!1;if(c=b(c),g)if("GET"===a)jQuery.ajax({url:c,type:a,dataType:"json",success:function(a){f(d(a,!0),a)},error:function(a){e(d(a,!0),a)}});else{var h=c.substring(c.indexOf("?")+1,c.length)+"&accept=json",i=c.substring(0,c.indexOf("?"));jQuery.ajax({url:i,type:"POST",data:h,dataType:"json",success:function(a){f(d(a,!0),a)},error:function(a){e(d(a,!0),a)}})}else{var j=new XMLHttpRequest;if("GET"===a)j.open(a,c+"&accept=json",!0);else{var h=c.substring(c.indexOf("?")+1,c.length)+"&accept=json",i=c.substring(0,c.indexOf("?"));j.open(a,i,!0),j.setRequestHeader("Content-type","application/x-www-form-urlencoded")}j.withCredentials=!0,j.onerror=j.ontimeout=j.onabort=function(){e(j)},j.onload=function(){if(j.responseText)try{var a=d(j.responseText,!1);return void(a.success?f(a,j):e(a,j))}catch(b){}e(j)},"GET"===a?j.send():j.send(h)}}var f=window.UserServerApi||(window.UserServerApi={});f.comm=f.comm||{},f.comm.sendRequest=function(b,d,g,h,i){var j=[];f.getOptions().urlParams.language||(f.getOptions().urlParams.language=f.getUserLanguage()),g=a({},f.getOptions().urlParams,g);for(var k in g)if(g[k]||"boolean"==typeof g[k])if("[object Array]"===Object.prototype.toString.apply(g[k]))for(var l=0;l<g[k].length;l++)j.push(encodeURIComponent(k)+"="+encodeURIComponent(g[k][l]));else j.push(encodeURIComponent(k)+"="+encodeURIComponent(g[k]));d+=j.length?"?"+j.join("&"):"",f.getOptions().jsonpEnabled=f.forceAjax?!1:f.getOptions().jsonpEnabled,f.getOptions().jsonpEnabled?c(b,d,h,i):e(b,d,h,i)},f.comm.jsonpCallbacks={counter:0}}(),function(){function a(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}function b(a,b){var c="/"===a.substr(-1)?a.substring(0,a.length-1):a,d="/"===b.substr(0,1)?b.substring(1):b;return c+"/"+d}function c(a,b,c){window.LoginDialog.isExperimentActive(a)?b():c()}var d=window.UserServerApi||(window.UserServerApi={});d.consts={userColorServerKey:"color",userColorClientKey:"userColor"};var e={languageCookie:"wixLanguage",helperCookie:"wixClient",mainCookie:"wixSession",uidCookie:"_wixUIDX",clientIdCookie:"_wixCIDX",languages:{en:"en",es:"es",pt:"pt",fr:"fr",ru:"ru",de:"de",pl:"pl",it:"it",ja:"ja",ko:"ko",tr:"tr",nl:"nl",no:"no",sv:"sv"},usersDomain:"https://users.wix.com/wix-users",apiDomain:"https://www.wix.com/_api",jsonpEnabled:!0,forceAjax:!1,urlParams:{source:"",suid:"",orgDocID:"null-doc-id",appUrl:window.location.protocol+"//"+window.location.host+window.location.pathname,urlThatUserRedirectedFrom:window.location.protocol+"//"+window.location.host+window.location.pathname}},f=function(){for(var a={},b=window.location.search.slice(1).split("&"),c=0;c<b.length;c++)a[b[c].split("=")[0]]=decodeURIComponent(b[c].split("=")[1]);return a}(),g={};g[d.consts.userColorClientKey]=d.consts.userColorServerKey;var h={login:{method:"POST",url:"/auth/login",queryParams:a({},g)},loginByGuid:{method:"POST",url:"/auth/loginByGuid",queryParams:a({},g)},socialLogin:{method:"GET",url:"/social/login/{providerId}",pathVariables:["providerId"],queryParams:a({},g)},getSocialConnections:{method:"GET",url:"/social/connection"},createSocialConnection:{method:"POST",url:"/social/connection/{providerId}",pathVariables:["providerId"]},revokeSocialConnection:{method:"DELETE",url:"/social/connection/{providerId}",pathVariables:["providerId"]},createUser:{method:"GET",url:"/auth/register",queryParams:a({},g)},forgotPassword:{method:"GET",url:"/auth/forgotPassword"},getUserDetails:{method:"POST",url:"/user/getUserDetails"},getUserProfileImage:{method:"GET",url:"/account-info-server/profileimage"},updateUser:{method:"GET",url:"/user/update"},setLanguage:{method:"GET",url:"/user/setLanguage"},ping:{method:"GET",url:"/user/ping"}};a(d,{setOptions:function(b){return b&&(b=a({},b),a(e.urlParams,b.urlParams||{}),delete b.urlParams,a(e,b)),d},getOptions:function(){return e},userAction:function(c,g,i,j,k,l){var m,n=l?l:e.usersDomain,o=b(n,h[c].url);if(k&&(o=o.replace("https","http")),h[c].pathVariables)for(m=0;m<h[c].pathVariables.length;m++)o=o.replace("{"+h[c].pathVariables[m]+"}",g[h[c].pathVariables[m]]),delete g[h[c].pathVariables[m]];if(h[c].queryParams){var p={},q=h[c].queryParams;for(m in q)f[m]?p[q[m]]=f[m]:e[m]&&(p[q[m]]=e[m]);for(var r in g){var s,t,u,v=g[r],w="object"==typeof v;if(w){u=r;for(var x in v)s=[u,x].join("."),t=v[x],g[s]=t;delete g[u]}}g=a(p,g)}d.comm.sendRequest(h[c].method,o,g,i,j)},getClientParams:function(){var b=d.cookies.getCookie(e.helperCookie);if(b){'"'===b[0]&&'"'===b[b.length-1]&&(b=JSON.parse(b));var c=b.split("|"),f={userName:c[0],email:c[1],mailStatus:c[2],permissions:c[3],isSessionNew:c[4],isSessionValid:c[5],userID:c[6]};return c[7]&&a(f,JSON.parse(c[7])),f}return null},getUserLanguage:function(){var a=window.location.host.split("."),b=2===a[0].length?a[0]:null;return b=b||d.cookies.getCookie(e.languageCookie),b=b||navigator.language||navigator.browserLanguage,e.languages[b]||"en"},login:function(b,e,f,g,h,i){var j=function(){if(window.LoginDialog.getCaptchaService()&&window.LoginDialog.getCaptchaService().get_challenge&&window.LoginDialog.getCaptchaService().get_response){var c=window.LoginDialog.getCaptchaService().get_challenge(),j=window.LoginDialog.getCaptchaService().get_response();try{i=i||{},i.recaptchaParams={},i.recaptchaParams.recaptcha_challenge_field=c,i.recaptchaParams.recaptcha_response_field=j}catch(k){}}d.userAction("login",a({email:b,password:e,rememberMe:f,enhanced:0},i),g,h)},k=function(){d.userAction("login",a({email:b,password:e,rememberMe:f,enhanced:0},i),g,h)};c("specs.users.RecaptchaABTest",j,k)},ping:function(a,b,c){d.userAction("ping",{},a,b,c)},socialLogin:function(b,c,e,f,g){c=a(c,g),d.userAction("socialLogin",a({providerId:b},c),e,f)},getSocialConnections:function(a,b){d.userAction("getSocialConnections",null,a,b)},createSocialConnection:function(b,c,e,f){d.userAction("createSocialConnection",a({providerId:b},c),e,f)},revokeSocialConnection:function(a,b,c,e){d.userAction("revokeSocialConnection",{providerId:a,forceDisconnect:e},b,c)},loginByGuid:function(a,b,c,e,f){d.userAction("loginByGuid",{guid:a,password:b,rememberMe:c,enhanced:0},e,f)},createUser:function(b,e,f,g,h){var i=a(h,{email:b,password:e});i.sendEmail=h&&h.sendEmail===!1?"false":"true";var j=function(){if(window.LoginDialog.getCaptchaService()&&window.LoginDialog.getCaptchaService().get_challenge&&window.LoginDialog.getCaptchaService().get_response){var a=window.LoginDialog.getCaptchaService().get_challenge(),b=window.LoginDialog.getCaptchaService().get_response();try{i.recaptchaParams={},i.recaptchaParams.recaptcha_challenge_field=a,i.recaptchaParams.recaptcha_response_field=b}catch(c){}}d.userAction("createUser",i,f,g)},k=function(){d.userAction("createUser",i,f,g)};c("specs.users.RecaptchaABTest",j,k)},forgotPassword:function(a,b,c){d.userAction("forgotPassword",{email:a},b,c)},setLanguage:function(a,b,c){e.urlParams.language=a,d.userAction("setLanguage",null,b,c)},getUserDetails:function(a,b){d.userAction("getUserDetails",null,a,b)},getUserProfileImage:function(a,b){d.userAction("getUserProfileImage",null,a,b,!0,e.apiDomain)},updateUser:function(a,b,c,e,f,g,h){var i={newUserName:b,newEmail:e,optInMail:f,newPassword:c,password:a};d.userAction("updateUser",i,g,h)},getToken:function(){return d.cookies.getCookie(e.mainCookie)},isSessionValid:function(){return d.getClientParams()},isUnknownUser:function(){var a=d.cookies.getCookie(e.uidCookie);return!a||"null-user-id"===a},logout:function(){var a=e.biLogger||window.LoginDialogBILogger;a&&a.log(LoginDialog.BIEvents.LOGOUT_CALLED,{origin:e.origin||window.location.href});var b=window.location.href.split("//").pop().split("/")[0],c="http://www."+b.split(".").slice(1).join(".")+"/signout";window.location.href=c},getClientId:function(){var a=d.cookies.getCookie(e.clientIdCookie);return a||"null-client-id"}})}();